# Maintainer: György Balló <ballogy@freestart.hu>
pkgname=ubuntuone-indicator
pkgver=0.0.11.67
_pkgver=0.0.11+r67
pkgrel=1
pkgdesc="A community implementation of Ubuntu One plugin for Application Indicators"
arch=(any)
url="https://launchpad.net/one-indicator"
license=(GPL)
depends=(libappindicator ubuntuone-client ubuntu-mono-icon-theme xdg-utils)
install=$pkgname.install
source=(https://launchpad.net/~rye/+archive/ubuntuone-extras/+files/${pkgname}_${_pkgver}~oneiric.tar.gz)
md5sums=(d2be6e254ddc073bc35ee7f8b7ce70f3)

build() {
  cd "$srcdir/source"

  python2 setup.py build
}

package() {
  cd "$srcdir/source"

  python2 setup.py install --root=$pkgdir/ --optimize=1

  # Add some compatibility symlink
  install -dm755 "$pkgdir"/usr/share/icons/hicolor/{22x22,24x24}/status/
  ln -s ../../../ubuntu-mono-dark/status/22/ubuntuone-client-error.svg "$pkgdir/usr/share/icons/hicolor/22x22/status/ubuntuone-client-error.png"
  ln -s ../../../ubuntu-mono-dark/status/22/ubuntuone-client-idle.svg "$pkgdir/usr/share/icons/hicolor/22x22/status/ubuntuone-client-idle.png"
  ln -s ../../../ubuntu-mono-dark/status/22/ubuntuone-client-updating.svg "$pkgdir/usr/share/icons/hicolor/22x22/status/ubuntuone-client-updating.png"
  ln -s ../../../ubuntu-mono-dark/status/22/ubuntuone-indicator-offline.svg "$pkgdir/usr/share/icons/hicolor/22x22/status/ubuntuone-indicator-offline.svg"
  ln -s ../../../ubuntu-mono-dark/status/24/ubuntuone-client-error.svg "$pkgdir/usr/share/icons/hicolor/24x24/status/ubuntuone-client-error.png"
  ln -s ../../../ubuntu-mono-dark/status/24/ubuntuone-client-idle.svg "$pkgdir/usr/share/icons/hicolor/24x24/status/ubuntuone-client-idle.png"
  ln -s ../../../ubuntu-mono-dark/status/24/ubuntuone-client-updating.svg "$pkgdir/usr/share/icons/hicolor/24x24/status/ubuntuone-client-updating.png"
  ln -s ../../../ubuntu-mono-dark/status/24/ubuntuone-indicator-offline.svg "$pkgdir/usr/share/icons/hicolor/24x24/status/ubuntuone-indicator-offline.svg"
}
