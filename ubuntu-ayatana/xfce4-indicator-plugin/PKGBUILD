# Maintainer: György Balló <ballogy@freestart.hu>
pkgname=xfce4-indicator-plugin
pkgver=0.3.1
pkgrel=1
pkgdesc="Plugin to display information from applications in the Xfce4 panel"
arch=('i686' 'x86_64')
url="http://goodies.xfce.org/projects/panel-plugins/xfce4-indicator-plugin"
license=('GPL')
depends=('xfce4-panel>=4.3.99.2' 'libindicator>=0.3.0' 'hicolor-icon-theme' 'xdg-utils')
install=$pkgname.install
source=(http://archive.xfce.org/src/panel-plugins/$pkgname/0.3/$pkgname-$pkgver.tar.bz2
        01_search-for-indicator-0.4-pc.patch
        02_fix-menu-position.patch
        03_attach-button-to-menu-right-at-the-beginning.patch
        xubuntu_exclude-modules.patch)
md5sums=('c4940695e412f7bac0fdb46be22ab5f2'
         'f54e5ac423a509a286d1b4787b4a6e3a'
         '2dc358959c595058ad5216ec1ba2a4a8'
         '4e81eaf242790c4e255ababd64865f0e'
         'c4b10f1de9ba0513beacb881b726c6ca')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -Np1 -i "$srcdir/01_search-for-indicator-0.4-pc.patch"
  patch -Np1 -i "$srcdir/02_fix-menu-position.patch"
  patch -Np1 -i "$srcdir/03_attach-button-to-menu-right-at-the-beginning.patch"
  patch -Np1 -i "$srcdir/xubuntu_exclude-modules.patch"

  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --libexecdir=/usr/lib/xfce4-indicator-plugin \
              --disable-static
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install
}
