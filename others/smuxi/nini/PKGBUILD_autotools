# Maintainer: György Balló <ballogy@freestart.hu>
# Contributor: MutantMonkey <mutantmonkey@gmail.com>
# Contributor: Madek <gonzaloseguel@gmail.com>

pkgname=nini
_pkgname=Nini
pkgver=1.1.0
pkgrel=3
pkgdesc="An uncommonly powerful .NET configuration library designed to help build highly configurable applications quickly"
arch=('any')
url="http://nini.sourceforge.net/"
license=('MIT')
depends=('mono')
makedepends=('unzip')
source=(http://downloads.sourceforge.net/$pkgname/$_pkgname-$pkgver.zip
        Makefile
        $pkgname-1.1.pc)
md5sums=('63384f75fabd401cff1500f738d452f4'
         '89c32a467cb2a24bad8126effaebadb0'
         '6e2cabea421a72247d4f1cdf1ffac9b6')

build() {
  cd "$srcdir/$_pkgname/Source"
  mdtool generate-makefiles -d:Release $_pkgname.sln
  sed -i 's/\[nunit]/\[mono-nunit]/' configure.ac

  ./autogen.sh --prefix=/usr --sysconfdir=/etc --localstatedir=/var
  make
}

package() {
  cd "$srcdir/$_pkgname/Source"

  make DESTDIR="$pkgdir/" install
  gacutil -i /home/ballogy/Szoftverek/build/others/smuxi/nini-2/src/Nini/Bin/DotNet/1.0/Release/Nini.dll -package $_pkgname -root $pkgdir/usr/lib/
}
