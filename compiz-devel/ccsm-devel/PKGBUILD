# Maintainer: György Balló <ballogy@freestart.hu>
pkgname=ccsm-devel
_pkgname=ccsm
pkgver=0.9.5.92
pkgrel=1
pkgdesc="Compizconfig Settings Manager in Python (development release)"
arch=('any')
url="http://www.compiz.org/"
license=('GPL')
depends=('compizconfig-python-devel' 'dbus-python' 'pygtk' 'hicolor-icon-theme' 'xdg-utils')
makedepends=('cmake' 'intltool')
provides=(ccsm=$pkgver)
conflicts=(ccsm)
replaces=(ccsm-dev)
source=(http://releases.compiz.org/$pkgver/$_pkgname-$pkgver.tar.bz2)
md5sums=('eb55c19d34d70d7d1df064a6359b012c')

build() {
  cd "$srcdir/$_pkgname-$pkgver"
  sed -i 's/python /python2 /' CMakeLists.txt

  [[ -d build ]] || mkdir build
  cd build

  cmake .. -DCMAKE_INSTALL_PREFIX="$pkgdir"/usr \
           -DCMAKE_BUILD_TYPE=Release \
           -DCOMPIZ_DESTDIR="$pkgdir"
  make
}

package() {
  cd "$srcdir/$_pkgname-$pkgver/build"

  make install
}
