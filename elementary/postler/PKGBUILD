# Maintainer: György Balló <ballogy@freestart.hu>
pkgname=postler
pkgver=0.1.1
pkgrel=1
pkgdesc="A super sexy, ultra simple desktop mail client built in vala"
arch=('i686' 'x86_64')
url="https://launchpad.net/postler"
license=('GPL')
depends=('libunique>=0.9' 'libwebkit>=1.1.18' 'libnotify>=0.7.0' 'libcanberra' 'libindicate' 'desktop-file-utils' 'hicolor-icon-theme' 'xdg-utils')
makedepends=('python2' 'vala>=0.10.0' 'intltool' 'msmtp')
optdepends=('dexter: provides contact completion and allows adding of contacts from Postler'
            'lynx: enables HTML to text conversion')
install=$pkgname.install
source=(http://git.xfce.org/apps/$pkgname/snapshot/$pkgname-$pkgver.tar.bz2)
md5sums=('02e502c9f4a4b92e4ace32d9e268f06d')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  python2 ./waf configure --prefix=/usr
  python2 ./waf build
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  python2 ./waf install --destdir=$pkgdir

  mkdir -p "$pkgdir/usr/share/indicators/messages/applications"
  echo '/usr/share/applications/postler.desktop' > "$pkgdir/usr/share/indicators/messages/applications/postler"
}
